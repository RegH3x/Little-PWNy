// Copyright (c) 2006-2014 Wade Alcorn - wade@bindshell.net
Ext.onReady(function(){submitAuthForm=function(){t.show(),e.getForm().submit({success:function(){window.location.href="/ui/panel"},failure:function(){null==Ext.get("loginError")&&Ext.DomHelper.insertAfter("loadingError",{id:"loginError",html:"<b>ERROR</b>: invalid username or password"}),t.hide()}})};var e=new Ext.form.FormPanel({url:"authentication/login",formId:"login_form",labelWidth:125,frame:!0,title:"Authentication",bodyStyle:"padding:5px 5px 0",width:350,defaults:{width:175,inputType:"password"},defaultType:"textfield",items:[{fieldLabel:"Username",name:"username-cfrm",inputType:"textfield",id:"user",listeners:{specialkey:function(e,t){t.getKey()==t.ENTER&&submitAuthForm()}}},{fieldLabel:"Password",name:"password-cfrm",inputType:"password",id:"pass",listeners:{specialkey:function(e,t){t.getKey()==t.ENTER&&submitAuthForm()}}}],buttons:[{text:"Login",id:"loginButton",handler:function(){submitAuthForm()}}]}),t=new Ext.LoadMask(Ext.getBody(),{msg:"Authenticating to BeEF..."});e.render("centered"),Ext.DomHelper.append("login_form",{tag:"div",id:"loadingError"}),document.getElementById("user").focus()});